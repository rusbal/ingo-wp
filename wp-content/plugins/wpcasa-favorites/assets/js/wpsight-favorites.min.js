jQuery(document).ready(function(e){var i=WPSight_Favorites.favorites_cookie,t=e(".favorites-add"),o=e(".favorites-see"),a=e(".favorites-remove"),s=WPSight_Favorites.favorites_page,r=e(".listing, .single-listing"),n=function(e,i){for(var t=e.split(","),o=0;o<t.length;o++)if(t[o]==i)return t.splice(o,1),t.join(",");return e};null!=e.cookie(i)&&r.each(function(){var a=e(this).find(t).data("favorite");-1!=e.cookie(i).search(a)&&(e(this).find(o).show(),e(this).find(t).hide(),0==e(this).find(".favorites-see small").length&&e(this).find(o).append(WPSight_Favorites.favorites_badge_before+e.cookie(i).split(",").length+WPSight_Favorites.favorites_badge_after))}),t.click(function(t){t.preventDefault();var a=e(this).data("favorite");if(null==e.cookie(i)||""==e.cookie(i))e.cookie(i,a,{expires:parseInt(WPSight_Favorites.favorites_expire),path:WPSight_Favorites.favorites_cookie_path});else{var s=e.cookie(i);e.cookie(i,s+","+a,{expires:parseInt(WPSight_Favorites.favorites_expire),path:WPSight_Favorites.favorites_cookie_path})}return e(this).fadeOut(75,function(){o.fadeIn(75),o.append(WPSight_Favorites.favorites_badge_before+e.cookie(i).split(",").length+WPSight_Favorites.favorites_badge_after)}),!1}),a.click(function(t){t.preventDefault();var o=e(this).data("favorite"),a=n(e.cookie(i),o);return e.cookie(i,a,{expires:parseInt(WPSight_Favorites.favorites_expire),path:WPSight_Favorites.favorites_cookie_path}),e("#listing-"+o).fadeOut(50,function(){e(".listings-panel-found").text(e.cookie(i).split(",").length),""==e.cookie(i)&&(e(".listings-panel-wrap").fadeOut(50),e(".wpsight-favorites-sc").append(WPSight_Favorites.favorites_no))}),!1});var c=e(".listings-compare"),f=e(".wpsight-listing-section-summary, .wpsight-listing-section-description, .wpsight-listing-section-compare-fade"),h=e(".wpsight-listing-section-compare");e.cookie(WPSight_Favorites.compare_cookie)&&"open"==e.cookie(WPSight_Favorites.compare_cookie)&&e("body").hasClass("page-id-"+s)&&(f.hide(),h.show(),c.addClass("open")),c.live("click",function(i){i.preventDefault(),h.is(":visible")?(h.fadeOut(100,function(){c.removeClass("open"),f.fadeIn(100,function(){e.isFunction(e.fn.matchHeight)&&e.fn.matchHeight._update()})}),e.cookie(WPSight_Favorites.compare_cookie,"closed",{expires:60,path:WPSight_Favorites.favorites_cookie_path})):(f.fadeOut(100,function(){c.addClass("open"),h.fadeIn(100),e.isFunction(e.fn.matchHeight)&&e.fn.matchHeight._update()}),e.cookie(WPSight_Favorites.compare_cookie,"open",{expires:60,path:WPSight_Favorites.favorites_cookie_path}))})});